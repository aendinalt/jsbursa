<html><body>
    <style>
        .border {
            border: solid black 3px;
            padding: 20px;
        }

        .inputzone {
            background-color: lightblue;
            margin-bottom: 10px;
        }


        .light {
            border: solid black 1px;
            width: 40px;
            height: 40px;
            display: inline-block;

        }
    </style>

    <h1>Светофор Nightmare Edition</h1>


    <h2>...или так верстают только...</h2>

    <div class="border">
        <div class="inputzone">
            <button>Click me
                <div class="light" style="background-color: red;"></div>
            </button>
        </div>
        <div class="inputzone">
            <button>Click me</button>
            <div><span><div>
                <!-- оторвался от души с тегами -->
                <div class="light" style="background-color: yellow;"></div>
            </div></span>
            </div>
        </div>
        <div class="inputzone"> <span><button>Click me</button></span>

            <div class="light" style="background-color: green;"></div>
        </div>
    </div>


<script>

    /*** Сервисный код. Пока в нем можно не разбираться ***/
    document.addEventListener('click', function (evt) {
        if (evt.target.nodeName.toLowerCase() === 'button') {
            processButtonClick(evt.target);
        }
    });

    function processButtonClick (element) {
        var inputZone = findInputZone(element);
        var light = inputZone.querySelector('.light');
        light.style.backgroundColor = 'blue';
         if (check()){
             alert('Готово');
         }
    }

    function findInputZone(element) {
        while (1) {
            var inputZone = element.parentNode;
            if (inputZone.getAttribute('class') == 'inputzone') {
                return inputZone;
            } else {
                element = inputZone;
            }
        }
    }

    function check() {
        var lights = document.getElementsByClassName('light');
        console.log(lights);
        var larr = [].slice.call(lights);
        console.log('larr: '+ larr);
        var trigger = true;

        larr.forEach(function(elt) {
                    if (elt.getAttribute('style') != 'background-color: blue;'){
                        trigger = false;
                    }
                }
        );
        console.log(trigger);
        return trigger;
    }

</script>
</body></html>